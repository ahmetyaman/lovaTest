{"ast":null,"code":"import { LanguageWeb } from '../../models/LanguageWeb';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../globalserv/auth.service\";\nimport * as i2 from \"./lang-translation.service\";\nexport let LangTransPipe = /*#__PURE__*/(() => {\n  class LangTransPipe {\n    constructor(authService, languageTranslationService) {\n      this.authService = authService;\n      this.languageTranslationService = languageTranslationService;\n      this._languageWeb = new LanguageWeb();\n    }\n\n    _loadData() {\n      this.languageTranslationService.getLanguages().subscribe(data => {\n        this._languageWeb = data;\n      });\n    }\n\n    transform(val, defaultLangVal) {\n      this._loadData();\n\n      let retVal = '';\n      console.log(JSON.stringify(this._languageWeb));\n      let token = this.authService.token;\n      /**\r\n       * Tokendan gelen dil değişkeni için modeldeki itemi sec.\r\n       */\n\n      if (token == null) token = 'tr';else token = 'es';\n      let filtText = val.toLocaleLowerCase();\n\n      switch (token) {\n        case 'tr':\n          retVal = this._languageWeb.tr.filter(data => data.txt_name.toLocaleLowerCase().indexOf(filtText) !== -1)[0].txt_lang;\n          break;\n\n        case 'en':\n          retVal = this._languageWeb.en.filter(data => data.txt_name.toLocaleLowerCase().indexOf(filtText) !== -1)[0].txt_lang;\n          break;\n\n        case 'es':\n          retVal = this._languageWeb.es.filter(data => data.txt_name.toLocaleLowerCase().indexOf(filtText) !== -1)[0].txt_lang;\n          break;\n\n        case 'ch':\n          retVal = this._languageWeb.ch.filter(data => data.txt_name.toLocaleLowerCase().indexOf(filtText) !== -1)[0].txt_lang;\n          break;\n      }\n\n      if (retVal == '') {\n        if (defaultLangVal) {\n          /**\r\n           * defaultLangVal  degeri  örneğin tr   default dil olsun  servisten dönen deger\r\n           * boş olduğundan  bu degeri içeri yazalım :)\r\n           */\n          let word = {\n            txt_lang: defaultLangVal,\n            txt_name: val\n          };\n          this.languageTranslationService.addWord(word, 'tr');\n          this.languageTranslationService.addWord(word, 'es'); // this.languageTranslationService.addWord(word, 'en');\n          // this.languageTranslationService.addWord(word, 'ch');\n\n          retVal = defaultLangVal;\n        }\n      }\n\n      return retVal;\n    }\n\n  }\n\n  LangTransPipe.ɵfac = function LangTransPipe_Factory(t) {\n    return new (t || LangTransPipe)(i0.ɵɵdirectiveInject(i1.AuthService, 16), i0.ɵɵdirectiveInject(i2.LangTranslationService, 16));\n  };\n\n  LangTransPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({\n    name: \"langTrans\",\n    type: LangTransPipe,\n    pure: true\n  });\n  return LangTransPipe;\n})();","map":null,"metadata":{},"sourceType":"module"}